import{j as V,k as q,l as z,m as E,n as H,o as j}from"./system-66c6ad5e.js";import{r as x}from"./serviceDict-09318a0d.js";import{u as l,a as F}from"./index-16b2bfc2.js";import K from"./AddRoleDialog-96d8fd1f.js";import M from"./DataScopeDialog-9b7d4446.js";import{u}from"./useHandleData-6ee70150.js";import{o as D,C as _,q as d,t as f,M as y,v as o,w as t,a2 as w,L as c,K as T,a0 as $,x as R}from"./vendor-7d8626b5.js";import"./select-d4c05a16.js";const U={class:"table-box"},G=["onClick"],I=["onClick"],J=["onClick"],Q=["onClick"],W=D({name:"system_role"}),se=D({...W,setup(X){const b=l("system.role"),i=_(),k=_(),L=_(),S=[{type:"selection",fixed:"left",width:60},{prop:"name",label:l(["system.role","common.name"]),search:{el:"input"}},{prop:"roleType",label:l(["system.role","common.type"]),enum:x},{prop:"createdAt",label:l("common.createdAt")},{prop:"remark",label:l("common.remark")},{prop:"operation",label:l("common.operate"),fixed:"right",width:200}],h=(e,a)=>{e==="update"&&a&&(delete a.createdAt,delete a.updatedAt);let s={title:l(`common.${e}`)+b,rowData:{...a||{rowType:"SUPER"}},formType:e,api:e==="add"?q:z,getTableList:i.value.getTableList};k.value.acceptParams(s)},A=async e=>{await u(E,{id:e.id||0},l(["common.delete","system.role"])),i.value.getTableList()},B=async e=>{await u(H,{id:e.id||0},l("common.copy")),i.value.getTableList()},N=async(e,a,s)=>{try{const r=await u(e,a,s);i.value.getTableList(),i.value.clearSelection(),r.status===0&&F(r.data)}catch{}},O=(e,a)=>{let r={ids:a.map(m=>m.id||0)};switch(e){case"copy":N(j,r,l("common.copy"));break}};return(e,a)=>{const s=d("el-button"),r=d("arrow-down"),m=d("el-icon"),g=d("el-dropdown-menu"),v=d("el-dropdown"),C=d("el-space"),P=d("ProTable");return f(),y("div",U,[o(P,{ref_key:"proTable",ref:i,title:R(b),columns:S,requestApi:R(V)},{tableHeader:t(n=>[o(C,null,{default:t(()=>[o(s,{type:"primary",onClick:a[0]||(a[0]=p=>h("add"))},{default:t(()=>[w(c(e.$t("common.add")),1)]),_:1}),o(v,{disabled:!n.isSelected,size:"default"},{dropdown:t(()=>[o(g,null,{default:t(()=>[T("div",{class:"dropdown-item",onClick:p=>O("copy",n.selectedList)},c(e.$t("common.copy")),9,G)]),_:2},1024)]),default:t(()=>[o(s,{type:"primary",disabled:!n.isSelected},{default:t(()=>[w(c(e.$t("common.batch")),1),o(m,{class:"el-icon--right"},{default:t(()=>[o(r)]),_:1})]),_:2},1032,["disabled"])]),_:2},1032,["disabled"])]),_:2},1024)]),operation:t(n=>[o(C,null,{default:t(()=>[o(v,{size:"default"},{dropdown:t(()=>[o(g,null,{default:t(()=>[n.row.isDefault?$("",!0):(f(),y("div",{key:0,class:"dropdown-item",onClick:p=>h("update",{...n.row})},c(e.$t("common.edit")),9,I)),n.row.isDefault?$("",!0):(f(),y("div",{key:1,class:"dropdown-item",onClick:p=>A(n.row)},c(e.$t("common.delete")),9,J)),T("div",{class:"dropdown-item",onClick:p=>B(n.row)},c(e.$t("common.copy")),9,Q)]),_:2},1024)]),default:t(()=>[o(s,{type:"success",size:"small"},{default:t(()=>[w(c(e.$t("common.more")),1),o(m,{class:"el-icon--right"},{default:t(()=>[o(r)]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:1},8,["title","requestApi"]),o(K,{ref_key:"formDialogRef",ref:k},null,512),o(M,{ref_key:"dataScopeDialogRef",ref:L},null,512)])}}});export{se as default};
