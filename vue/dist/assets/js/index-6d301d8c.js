import{b as E,c as M,f as B,h as V,i as A}from"./system-66c6ad5e.js";import{_ as L,M as D}from"./AddMenuDialog.vue_vue_type_script_setup_true_lang-d01d914e.js";import{A as I,u}from"./index-16b2bfc2.js";import{Y as N}from"./serviceDict-09318a0d.js";import{u as x}from"./useHandleData-6ee70150.js";import{o as y,C as _,q as r,t as i,M as O,v as l,w as n,a2 as p,L as m,K as S,u as g,J as q,a0 as P,x as C,E as z}from"./vendor-7d8626b5.js";import"./select-d4c05a16.js";const H={class:"table-box"},K=y({name:"system_menu"}),X=y({...K,setup(R){let h=I(D);const c=u("system.menu"),d=_(),f=_(),w=[{prop:"name",label:"\u540D\u79F0",align:"left",fixed:"left",width:220,search:{el:"input"}},{prop:"menuType",label:"\u7C7B\u578B",tag:!0,enum:h},{prop:"metaIcon",label:"\u56FE\u6807",width:70},{prop:"path",label:"\u8DEF\u5F84"},{prop:"perms",label:"\u6743\u9650\u6807\u8BC6"},{prop:"priority",label:"\u6392\u5E8F\u503C",sortable:!0},{prop:"enable",label:"\u662F\u5426\u542F\u7528"},{prop:"metaIsKeepAlive",label:"\u662F\u5426\u7F13\u5B58",tag:!0,enum:N},{prop:"operation",label:"\u64CD\u4F5C",fixed:"right",width:180}],T=async e=>{await x(M,{id:e.id||0},u(["common.delete","system.menu"])),d.value.getTableList()},b=(e,a)=>{e==="update"&&a&&(delete a.children,delete a.createdAt,delete a.updatedAt);let o={title:u(`common.${e}`)+c,rowData:{...a||{}},formType:e,api:e==="add"?B:V,getTableList:()=>{}};f.value.acceptParams(o)},k=(e,a)=>{A({id:a&&a.id||0,enable:e}).then(o=>{o.status===0&&z({message:u("common.operationSuccess"),type:"success"})}).catch(()=>{a.enable=!e})};return(e,a)=>{const o=r("el-button"),F=r("el-icon"),$=r("el-switch"),v=r("ProTable");return i(),O("div",H,[l(v,{ref_key:"proTable",ref:d,title:C(c),pagination:!1,indent:20,columns:w,requestApi:C(E)},{tableHeader:n(()=>[l(o,{type:"primary",onClick:a[0]||(a[0]=t=>b("add"))},{default:n(()=>[p(m(e.$t("common.add")),1)]),_:1})]),name:n(t=>[S("span",null,m(t.row.name?e.$t(`menu.${t.row.name}`):""),1)]),metaIcon:n(t=>[t.row.metaIcon?(i(),g(F,{key:0},{default:n(()=>[(i(),g(q(t.row.metaIcon)))]),_:2},1024)):P("",!0)]),enable:n(t=>[l($,{modelValue:t.row.enable,"onUpdate:modelValue":s=>t.row.enable=s,onChange:s=>k(s,t.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),operation:n(t=>[l(o,{type:"primary",size:"small",onClick:s=>b("update",{...t.row})},{default:n(()=>[p(m(e.$t("common.update")),1)]),_:2},1032,["onClick"]),l(o,{type:"danger",size:"small",onClick:s=>T(t.row)},{default:n(()=>[p(m(e.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["title","requestApi"]),l(L,{ref_key:"formDialogRef",ref:f},null,512)])}}});export{X as default};
