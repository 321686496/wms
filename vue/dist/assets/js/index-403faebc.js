import{b as z,d as A,c as R,m as M}from"./order-c813a367.js";import{u as _}from"./useHandleData-6ee70150.js";import{u as a,r as b,a as g}from"./index-16b2bfc2.js";import{o as T,C as k,q as r,t as P,M as V,v as t,w as o,a2 as p,L as d,x as c,K as u}from"./vendor-7d8626b5.js";const W={class:"table-box"},E=["onClick"],H=["onClick"],F=["onClick"],K=["onClick"],j=T({name:"base_order"}),X=T({...j,setup(G){const B=a("base.order"),i=k(),$=k([{type:"selection",fixed:"left",width:50},{prop:"operation",label:a("common.operate"),width:150},{prop:"billDate",label:a("common.billDate"),minWidth:120},{prop:"billCode",label:a("common.billCode"),minWidth:120,search:{el:"input"}},{prop:"createAdminName",minWidth:120,label:a("common.createName")}]),D=()=>{b.push("/base/order/add")},L=e=>{b.push({path:"/base/order/detail",query:{id:e.id}})},N=async e=>{await _(A,{id:e.id||0},a("common.delete")),i.value.getTableList()},S=async e=>{try{const n=await _(R,{ids:e},a("common.delete"));i.value.getTableList(),i.value.clearSelection(),n.status===0&&g(n.data)}catch{}},q=async e=>{try{const n=await _(M,{ids:e},a("common.merge"));i.value.getTableList(),i.value.clearSelection(),n.status===0&&g(n.data)}catch{}},f=(e,n)=>{switch(e){case"delete":S(n.map(l=>l.id||0));break;case"merge":q(n.map(l=>l.id||0));break}},O=e=>{b.push({path:"/base/order/add",query:{id:e.id,bc:e.billCode}})};return(e,n)=>{const l=r("el-button"),h=r("arrow-down"),w=r("el-icon"),y=r("el-dropdown-menu"),v=r("el-dropdown"),C=r("el-space"),x=r("ProTable");return P(),V("div",W,[t(x,{ref_key:"proTable",ref:i,colSettingType:"base_order",title:c(B),columns:$.value,initParam:{isMerge:!1},requestApi:c(z)},{tableHeader:o(s=>[t(C,null,{default:o(()=>[t(l,{type:"primary",onClick:D},{default:o(()=>[p(d(c(a)("common.add")),1)]),_:1}),t(v,{disabled:!s.isSelected,size:"default"},{dropdown:o(()=>[t(y,null,{default:o(()=>[u("div",{class:"dropdown-item",onClick:m=>f("delete",s.selectedList)},d(c(a)("common.delete")),9,E),u("div",{class:"dropdown-item",onClick:m=>f("merge",s.selectedList)},d(c(a)("common.merge")),9,H)]),_:2},1024)]),default:o(()=>[t(l,{type:"primary",disabled:!s.isSelected},{default:o(()=>[p(d(c(a)("common.batch")),1),t(w,{class:"el-icon--right"},{default:o(()=>[t(h)]),_:1})]),_:2},1032,["disabled"])]),_:2},1032,["disabled"])]),_:2},1024)]),operation:o(s=>[t(C,null,{default:o(()=>[t(l,{type:"primary",size:"small",onClick:m=>L(s.row)},{default:o(()=>[p(d(c(a)("common.detail")),1)]),_:2},1032,["onClick"]),t(v,{size:"default"},{dropdown:o(()=>[t(y,null,{default:o(()=>[u("div",{class:"dropdown-item",onClick:m=>O(s.row)},d(e.$t("common.edit")),9,F),u("div",{class:"dropdown-item",onClick:m=>N(s.row)},d(e.$t("common.delete")),9,K)]),_:2},1024)]),default:o(()=>[t(l,{type:"success",size:"small"},{default:o(()=>[p(d(e.$t("common.more")),1),t(w,{class:"el-icon--right"},{default:o(()=>[t(h)]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:1},8,["title","columns","requestApi"])])}}});export{X as default};
