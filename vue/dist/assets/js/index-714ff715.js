import{g as x,a as N,u as q,d as w,e as V}from"./system-66c6ad5e.js";import{q as $}from"./select-d4c05a16.js";import{Y as A}from"./serviceDict-09318a0d.js";import{u as L}from"./useHandleData-6ee70150.js";import{u as e}from"./index-16b2bfc2.js";import{o as g,C as f,q as s,t as E,M as I,v as n,w as m,a2 as i,L as d,K as P,x as y,E as S}from"./vendor-7d8626b5.js";const O={class:"table-box"},B=g({name:"system_department"}),K=g({...B,setup(z){const c=e("system.department"),p=f(),u=f(),_=[{prop:"name",label:e("system.departmentName"),search:{el:"input"},align:"left"},{prop:"isDefault",label:e(["common.isDefault","system.departmentName"]),tag:!0,enum:A},{prop:"leader",label:e("system.leader")},{prop:"phone",label:e("login.mobile")},{prop:"email",label:e("login.email")},{prop:"enable",label:e("common.isEnable")},{prop:"priority",label:e("common.priority"),sortable:!0},{prop:"createdAt",label:e("common.createdAt")},{prop:"operation",label:e("common.operate"),fixed:"right",width:180}],h=[{field:"pid",type:"cascader",extraProps:{props:{checkStrictly:!0,emitPath:!1},filterable:!0},action:$,label:e(["common.parent","system.department"]),rules:[{required:!0,message:e(["common.pleaseSelect","common.parent","system.department"])}]},{field:"name",type:"text",label:e("system.departmentName"),placeholder:e(["common.pleaseInput","system.departmentName"]),rules:[{required:!0,message:e(["common.pleaseInput","system.departmentName"])}]},{field:"leader",type:"text",label:e("system.leader"),placeholder:e(["common.pleaseInput","system.leader"])},{field:"phone",type:"text",label:e("login.mobile"),placeholder:e(["common.pleaseInput","login.mobile"])},{field:"email",type:"text",label:e("login.email"),placeholder:e(["common.pleaseInput","login.email"])},{field:"priority",type:"number",label:e("common.priority")}],b=(t,a)=>{t==="update"&&a&&(delete a.children,delete a.createdAt,delete a.updatedAt);let l={title:e(`common.${t}`)+c,rowData:{...a||{priority:0}},formType:t,api:t==="add"?N:q,getTableList:p.value.getTableList};u.value.acceptParams(l)},C=async t=>{await L(w,{id:t.id||0},e(["common.delete","system.department"])),p.value.getTableList()},T=(t,a)=>{V({id:a&&a.id||0,enable:t}).then(l=>{l.status===0&&S({message:e("common.operationSuccess"),type:"success"})}).catch(()=>{a.enable=!t})};return(t,a)=>{const l=s("el-button"),k=s("el-switch"),D=s("ProTable"),v=s("form-dialog");return E(),I("div",O,[n(D,{ref_key:"proTable",ref:p,columns:_,requestApi:y(x),pagination:!1,indent:20,title:y(c)},{tableHeader:m(()=>[n(l,{type:"primary",onClick:a[0]||(a[0]=o=>b("add"))},{default:m(()=>[i(d(t.$t("common.add")),1)]),_:1})]),enable:m(o=>[P("div",null,[n(k,{modelValue:o.row.enable,"onUpdate:modelValue":r=>o.row.enable=r,onChange:r=>T(r,o.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])]),operation:m(o=>[n(l,{type:"primary",size:"small",onClick:r=>b("update",{...o.row}),disabled:o.row.isDefault},{default:m(()=>[i(d(t.$t("common.edit")),1)]),_:2},1032,["onClick","disabled"]),n(l,{type:"danger",size:"small",onClick:r=>C(o.row)},{default:m(()=>[i(d(t.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["requestApi","title"]),n(v,{columns:h,ref_key:"formDialogRef",ref:u},null,512)])}}});export{K as default};
